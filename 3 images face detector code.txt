# ğŸ“Œ Step 1: Install Required Libraries
!pip install deepface
!pip install -q opencv-python

# ğŸ“Œ Step 2: Import Libraries
import os
from google.colab import files
from deepface import DeepFace
import shutil

# ğŸ“Œ Step 3: Create 'Pictures' Folder (if not exists)
if not os.path.exists("Pictures"):
    os.mkdir("Pictures")

# ğŸ“Œ Step 4: Upload Three Images
print("ğŸ“¤ Please upload **THREE** face images (JPG/PNG)")
uploaded = files.upload()

# ğŸ“Œ Step 5: Move Uploaded Images to 'Pictures' Folder
uploaded_image_paths = []
for file_name in uploaded.keys():
    src = file_name
    dst = os.path.join("Pictures", file_name)
    shutil.move(src, dst)
    uploaded_image_paths.append(dst)

# ğŸ“Œ Step 6: Check if Three Images Were Uploaded
if len(uploaded_image_paths) != 3:
    print("âš ï¸ Please upload exactly THREE images.")
else:
    print("\nğŸ” Verifying Faces...")

    # ğŸ“Œ Step 7: Compare All Three Combinations
    result_1_2 = DeepFace.verify(uploaded_image_paths[0], uploaded_image_paths[1])
    result_1_3 = DeepFace.verify(uploaded_image_paths[0], uploaded_image_paths[2])
    result_2_3 = DeepFace.verify(uploaded_image_paths[1], uploaded_image_paths[2])

    # ğŸ“Œ Step 8: Show Results
    print("\nğŸ“¸ Result: Image 1 vs Image 2 â†’", "âœ… Same" if result_1_2["verified"] else "âŒ Different")
    print("ğŸ“¸ Result: Image 1 vs Image 3 â†’", "âœ… Same" if result_1_3["verified"] else "âŒ Different")
    print("ğŸ“¸ Result: Image 2 vs Image 3 â†’", "âœ… Same" if result_2_3["verified"] else "âŒ Different")

    # ğŸ“Œ Step 9: Final Conclusion
    if result_1_2["verified"] and result_1_3["verified"] and result_2_3["verified"]:
        print("\nâœ… All three images are of the SAME person.")
    else:
        print("\nâŒ All three images are NOT of the same person.")
